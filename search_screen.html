<!doctype html>
<html class="no-js" lang="zxx">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Search</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/new-news-icon.png">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/bootstrap.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<header>
    <div class="header-area main-header">
        <div class="header-top">
            <div class=" row col-xl-12 d-flex justify-content-between align-items-center">
                <div class="header-info-left ">
                    <div class="header-social d-none d-sm-block" style="margin-left: 50px">
                        <a href="#"><i class="fa fa-facebook-f"></i></a>
                        <a href="#"><i class="fa fa-instagram"></i></a>
                        <a href="#"><i class="fa fa-twitter"></i></a>
                        <a href="#"><i class="fa fa-linkedin-in"></i></a>
                        <a href="#"><i class="fa fa-tumblr"></i></a>
                    </div>
                </div>
                <div class="header-info-mid">

                    <div class="logo">
                        <a href="index.html"><img src="assets/img/new-news-logo2.png" width='400' height="auto"></a>
                    </div>
                </div>
                <div class="header-info-right d-flex align-items-center">
                    <ul id="login_state">
                        <li>
                            <form class="search-form" action="#">
                                <i class="fa fa-search"></i>
                                <input type="search" class="form-control" placeholder="Search Here"
                                       title="Search here">
                            </form>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="header-bottom  header-sticky">
            <div class="row align-items-center">
                <div class="col-xl-12">
                    <div class="logo2">
                        <a><img src="assets/img/new-news-logo2.png" width='350' height="auto"></a>
                    </div>
                    <div class="logo3 d-block d-sm-none">
                        <a><img src="assets/img/new-news-logo2.png" width='300' height="auto"></a>
                    </div>

                    <div class="main-menu text-center d-none d-lg-block">
                        <nav>
                            <ul id="navigation">
                                <li><a href="index.html">Home</a></li>
                                <li><a href="category.html">Politics</a></li>
                                <li><a href="category.html">Health</a></li>
                                <li><a href="category.html">Economics</a></li>
                                <li><a href="category.html">Sport</a></li>
                                <li><a href="category.html">Technology</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>

                <div class="col-xl-12">
                    <div class="mobile_menu d-block d-lg-none"></div>
                </div>
            </div>
        </div>
    </div>
</header>
<main>


    <section class="tranding-area " style="margin-top: 70px">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-xl-8 col-lg-8 col-md-8" id="category-news-wrapper">


                </div>
            </div>
        </div>
    </section>


    <div class="pagination-area text-center">
        <div class="container">
            <div class="row">
                <div class="col-xl-12">
                    <div class="single-wrap d-flex justify-content-center" id="category-pagination">
                        <!--                        <nav aria-label="Page navigation example">-->
                        <!--                            <ul class="pagination justify-content-start " id="myDIV">-->
                        <!--                                <li class="page-item"><a class="page-link" href="#"><span class="ti-angle-left"></span></a>-->
                        <!--                                </li>-->
                        <!--                                <li class="page-item active"><a class="page-link" href="#">01</a></li>-->
                        <!--                                <li class="page-item"><a class="page-link" href="#">02</a></li>-->
                        <!--                                <li class="page-item"><a class="page-link" href="#">03</a></li>-->
                        <!--                                <li class="page-item"><a class="page-link" href="#"><span class="ti-angle-right"></span></a>-->
                        <!--                                </li>-->
                        <!--                            </ul>-->
                        <!--                        </nav>-->
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="instagram-area fix" style="margin-top: 20px">
        <div class="container-fluid p-0">
            <div class="row">
                <div class="col-xl-12">
                    <div class="instagram-active owl-carousel">
                        <div class="single-instagram">
                            <img src="assets/img/gallery/xinstra1.jpg.pagespeed.ic.GSgh8nonyi.jpg" alt="">
                            <a href="#"><i class="fa fa-instagram"></i></a>
                        </div>
                        <div class="single-instagram">
                            <img src="assets/img/gallery/xinstra2.jpg.pagespeed.ic.iIVHYx2eh_.jpg" alt="">
                            <a href="#"><i class="fa fa-instagram"></i></a>
                        </div>
                        <div class="single-instagram">
                            <img src="assets/img/gallery/xinstra3.jpg.pagespeed.ic.oTeFcXfFju.jpg" alt="">
                            <a href="#"><i class="fa fa-instagram"></i></a>
                        </div>
                        <div class="single-instagram">
                            <img src="assets/img/gallery/xinstra4.jpg.pagespeed.ic.Ef5JSlPEeo.jpg" alt="">
                            <a href="#"><i class="fa fa-instagram"></i></a>
                        </div>
                        <div class="single-instagram">
                            <img src="assets/img/gallery/xinstra5.jpg.pagespeed.ic.JHj6wXPmAJ.jpg" alt="">
                            <a href="#"><i class="fa fa-instagram"></i></a>
                        </div>
                        <div class="single-instagram">
                            <img src="assets/img/gallery/xinstra6.jpg.pagespeed.ic.9UmKYcdNvC.jpg" alt="">
                            <a href="#"><i class="fa fa-instagram"></i></a>
                        </div>
                        <div class="single-instagram">
                            <img src="assets/img/gallery/xinstra3.jpg.pagespeed.ic.oTeFcXfFju.jpg" alt="">
                            <a href="#"><i class="fa fa-instagram"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</main>
<footer>
    <div class="footer-area footer-padding">
        <div class="container">
            <div class="row d-flex justify-content-between">
                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
                    <div class="single-footer-caption mb-50">
                        <div class="single-footer-caption mb-30">

                            <div class="footer-logo mb-25">
                                <a href="index.html"><img src="assets/img/new-news-logo2.png" width="300" height="auto"></a>
                            </div>
                            <div class="footer-tittle">
                                <div class="footer-pera">
                                    <p>Heaven fruitful doesn't over lesser days appear creeping seasons so behold
                                        bearing days open</p>
                                </div>
                            </div>
                            <div class="footer-social">
                                <a href="#"><i class="fa fa-facebook-f"></i></a>
                                <a href="#"><i class="fa fa-instagram"></i></a>
                                <a href="#"><i class="fa fa-twitter"></i></a>
                                <a href="#"><i class="fa fa-linkedin-in"></i></a>
                                <a href="#"><i class="fa fa-tumblr"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-2 col-lg-2 col-md-4 col-sm-5">
                    <div class="single-footer-caption mb-50">
                        <div class="footer-tittle">
                            <h4>Useful links</h4>
                            <ul>
                                <li><a href="#">About Me</a></li>
                                <li><a href="#">Become an Writer</a></li>
                                <li><a href="#">Privacy & Policy</a></li>
                                <li><a href="#">Terms</a></li>
                                <li><a href="#">Contact Us</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-4 col-sm-6">
                    <div class="single-footer-caption mb-50">
                        <div class="footer-tittle">
                            <h4>Top Categories</h4>
                            <ul>
                                <li><a href="#">Politics</a></li>
                                <li><a href="#"> Health</a></li>
                                <li><a href="#">Economics</a></li>
                                <li><a href="#">Sport</a></li>
                                <li><a href="#">Technology</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6">
                    <div class="single-footer-caption mb-50">
                        <div class="footer-tittle mb-50">
                            <h4>Subscribe Newsletter</h4>
                            <p>Subscribe our newsletter to get update news & updates.</p>
                        </div>

                        <div class="footer-form">
                            <div id="mc_embed_signup">
                                <form target="_blank"
                                      action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01"
                                      class="subscribe_form relative mail_part" novalidate>
                                    <input type="email" name="EMAIL" id="newsletter-form-email"
                                           placeholder="  Enter your email">
                                    <div class="form-icon">
                                        <button type="submit" name="submit" id="newsletter-submit"
                                                class="email_icon newsletter-submit button-contactForm">
                                            Subscribe
                                        </button>
                                    </div>
                                    <div class="mt-10 info"></div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-bottom-area">
        <div class="container">
            <div class="row d-flex align-items-center footer-border">
                <div class="col-xl-12 footer-copy-right text-center">
                    <p>Copyright &copy;<script>document.write(new Date().getFullYear());</script>
                        All rights reserved | Made with <i class="fa fa-heart color-danger"
                                                           aria-hidden="true"></i> by <a
                                rel="nofollow noopener">Ali Yousefi</a>
                    </p>

                </div>
            </div>
        </div>
    </div>
</footer>

<div id="back-top">
    <a title="Go to Top"> <i class="fa fa-arrow-up" style="color: white"></i></a>
</div>


<script type="text/javascript" src="api.js"></script>
<script>
    if (localStorage.getItem('token') === null)
        localStorage.setItem('token', '');
    if (localStorage.getItem('token') === '')
        localStorage.setItem('token', guestToken);


    console.log(document.cookie);
    console.log(getCookie('username'));
    console.log(isLogin());

    // changeButton();

    if (isLogin()) {
        document.getElementById('login_state').innerHTML += `<li><a class="header-btn">${getCookie('username')}</a>
                                            <ul class="multipage">
                                                <li><a href="about.html"><i class="fa fa-user" style="padding-right: 10px"></i>Profile</a></li>
                                                <li><a href="blog.html"><i class="fa fa-plus-square" style="padding-right: 10px"></i>Add news</a></li>
                                                <li><a href="blog.html"><i class="fa fa-cog" style="padding-right: 10px"></i>Setting</a></li>
                                                <li><a href="#" onclick="logout('index.html');"><i class="fa fa-sign-out" style="padding-right: 10px"></i>Logout</a></li>
                                            </ul>
                                        </li>`
    } else document.getElementById('login_state').innerHTML += `<li><a href="login.html" class="header-btn" id="login_button">Sign in</a></li>`

</script>

<script>
    window.onload = function () {
        var url = document.location.href,
            params = url.split('?')[1].split('&'),
            data = {}, tmp;
        for (var i = 0, l = params.length; i < l; i++) {
            tmp = params[i].split('=');
            data[tmp[0]] = tmp[1];
        }
        if (typeof data.page === 'undefined') data.page = '1';
        console.log(data.search);
        document.title = data.search;
        let getNews = () => {
            // fetch('https://news-websitex.herokuapp.com/api/news')
            fetch('http://127.0.0.1:8000/api/search?page='+data.page+'&search='+data.search, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Token ' + localStorage.getItem('token')
                },
            })
                .then(res => res.json())
                .then(response => {
                    console.log('success: ', response);
                    buildNews(response, data.page, data.search);
                });
        };
        getNews();
    };

    let buildNews = (news, currentPage, search) => {
        let newsWrapper = document.getElementById('category-news-wrapper');


        if (news.count > 10)
            document.getElementById('category-pagination').innerHTML = `
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-start " id="myDIV">
                    <li class="page-item"><a class="page-link"
                        href="http://localhost:1587/new-website-template/search_screen.html?page=${parseInt(currentPage) === 1 ? currentPage : parseInt(currentPage)-1}&search=${search}">
                        <span class="ti-angle-left"></span></a></li>
                    <li class="page-item active"><a class="page-link">${currentPage}</a></li>
                    <li class="page-item"><a class="page-link" href="http://localhost:1587/new-website-template/search_screen.html?page=${parseInt(currentPage)+1 <= Math.ceil(news.count/10) ? parseInt(currentPage)+1 : currentPage}&search=${search}">
                        ${parseInt(currentPage)+1 > Math.ceil(news.count/10) ? '-' : parseInt(currentPage)+1}</a></li>
                    <li class="page-item"><a class="page-link" href="http://localhost:1587/new-website-template/search_screen.html?page=${parseInt(currentPage)+2 <= Math.ceil(news.count/10) ? parseInt(currentPage)+2 : currentPage}&search=${search}">
                        ${parseInt(currentPage)+2 > Math.ceil(news.count/10) ? '-' : parseInt(currentPage)+2}</a></li>
                    <li class="page-item"><a class="page-link"
                        href="http://localhost:1587/new-website-template/search_screen.html?page=${parseInt(currentPage) === Math.ceil(news.count/10) ? currentPage : parseInt(currentPage)+1}&search=${search}">
                        <span class="ti-angle-right"></span></a>
                    </li>
                </ul>
            </nav>`;


        for (let i = 0; i < news.results.length; i++) {
            let newsItem = news.results[i];

            var date = new Date(newsItem.createDate);

            let newsCard = `
                <div class="whats-right-single mb-40">
                    <div class="whats-right-img">
                        <a href="news_details.html?id=${newsItem.newsID}""><img
                                src="${newsItem.ImageUrl}" alt="" height="150" width="250" style="object-fit: cover"></a>
                    </div>
                    <div class="whats-right-cap">
                        <h4><a href="news_details.html?id=${newsItem.newsID}">${newsItem.newsTitle}</a></h4>
                        <span>${newsItem.viewCounter}  <i class="fas fa-eye"></i></span>
                        <p>${date.getDate()} ${date.toLocaleString('default', {month: 'short'})} ${date.getFullYear()}  |  by
                                <a href="profile.html?username=${newsItem.username}">${newsItem.author}</a></p>
                        <p>${newsItem.newsID}</p>
                    </div>
                </div>`;

            newsWrapper.innerHTML += newsCard;
        }
    };

</script>


<script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
<script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
<script src="assets/js/popper.min.js+bootstrap.min.js.pagespeed.jc.-Z5m6ljAND.js"></script>
<script>eval(mod_pagespeed_aaYokwErtx);</script>
<script>eval(mod_pagespeed_gMJAcNlmbI);</script>

<script src="assets/js/owl.carousel.min.js+slick.min.js.pagespeed.jc.F6wXCct6U2.js"></script>
<script>eval(mod_pagespeed_KlLvOZN8Fy);</script>
<script>eval(mod_pagespeed_$TEYNsEnUF);</script>
<script src="assets/js/lightslider.min.js+jquery.slicknav.min.js+wow.min.js+jquery.js"></script>
<script>eval(mod_pagespeed_SsjX9wl8YK);</script>
<script>eval(mod_pagespeed_FsFY_1b99X);</script>

<script>eval(mod_pagespeed_yCBvmSHiqi);</script>
<script>eval(mod_pagespeed_6wgZmOj4mJ);</script>
<script>eval(mod_pagespeed_ACR6aNIQJ0);</script>

<script>eval(mod_pagespeed_l3DmqqKHpk);</script>
<script src="assets/js/jquery.form.js+jquery.validate.min.js+mail-script.js+jquery.js"></script>
<script>eval(mod_pagespeed_Tz7N8H_GxJ);</script>
<script>eval(mod_pagespeed_eCe2npfiIC);</script>
<script>eval(mod_pagespeed_IEpshS3M$A);</script>
<script>eval(mod_pagespeed_no8v3TXY1I);</script>

<script>eval(mod_pagespeed_Xuk2NU2Nkf);</script>
<script>eval(mod_pagespeed_$TGHfHB1G2);</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'UA-23581568-13');
</script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/v652eace1692a40cfa3763df669d7439c1639079717194"
        integrity="sha512-Gi7xpJR8tSkrpF7aordPZQlW2DLtzUlZcumS8dMQjwDHEnw9I7ZLyiOj/6tZStRBGtGgN6ceN6cMH8z7etPGlw=="
        data-cf-beacon='{"rayId":"6c5295f0c9694ea9","token":"cd0b4b3a733644fc843ef0b185f98241","version":"2021.12.0","si":100}'
        crossorigin="anonymous"></script>
</body>
</html>